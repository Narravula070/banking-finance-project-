pipeline {
  agent any
  
  tools {
    maven 'M2_HOME'
    terraform 'terraform'
  }
  
  stages {
    stage('Source code') {
      steps {
        git 'https://github.com/kranthi619/kranthi-pro2.git'
      }
    }
    
    stage('Create infrastructure') {
      steps {
        dir('test-server') {
        sh 'sudo chmod 600 exampl.pem'
        sh 'terraform init'
        sh 'terraform validate'
        sh 'terraform apply --auto-approve'
          
        }
      }
    }
  }
}
  

